// Test simple functions instead of lambdas for now

print("Higher-order Functions Test:");

// Define functions normally
fn double(x) {
    x * 2
}

fn isEven(n) {
    n % 2 == 0
}

print("double(5) = " + str(double(5)));
print("isEven(4) = " + str(isEven(4)));
print("isEven(7) = " + str(isEven(7)));

// Higher-order function - map
fn map(arr, func) {
    let result = [];
    for item in arr {
        result = push(result, func(item));
    }
    result
}

let numbers = [1, 2, 3, 4, 5];
let doubled = map(numbers, double);
print("Original: [" + join(numbers, ", ") + "]");
print("Doubled: [" + join(doubled, ", ") + "]");

// Filter function
fn filter(arr, predicate) {
    let result = [];
    for item in arr {
        if (predicate(item)) {
            result = push(result, item);
        }
    }
    result
}

let evens = filter(numbers, isEven);
print("Even numbers: [" + join(evens, ", ") + "]");

// Reduce function  
fn reduce(arr, func, initial) {
    let result = initial;
    for item in arr {
        result = func(result, item);
    }
    result
}

fn add(a, b) {
    a + b
}

let sum = reduce(numbers, add, 0);
print("Sum: " + str(sum));